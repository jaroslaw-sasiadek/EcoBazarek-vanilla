(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))s(t);new MutationObserver(t=>{for(const n of t)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function o(t){const n={};return t.integrity&&(n.integrity=t.integrity),t.referrerPolicy&&(n.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?n.credentials="include":t.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(t){if(t.ep)return;t.ep=!0;const n=o(t);fetch(t.href,n)}})();const m="https://api-eko-bazarek.azurewebsites.net/api",r=m+"/products",g=r+"/types",h=r+"/categories",E=r+"/01d5e2a0-1b34-4644-8205-506130e03b75",L={productsURL:r,productURL:E,typesURL:g,categoriesURL:h},d={apiUrl:m,products:L};async function a(c){try{const e=await fetch(c);if(!e.ok)throw new Error(e.status);return await e.json()}catch{alert("Nie udało się wczytać danych!")}}function f(c){const e=document.getElementById("categories__ul");c.map(o=>{const s=document.createElement("li");s.setAttribute("id",o.id),s.classList.add(o.type),s.addEventListener("click",()=>{a(d.products.productURL)});const t=document.createElement("img");t.src=o.iconUrl,t.alt=o.name;const n=document.createElement("p");n.textContent=o.name,s.append(t,n),e.append(s)})}function b(c){return c.filter(e=>e.type==="CEREALS"||e.type==="FRUITS"||e.type==="VEGETABLE"||e.type==="WINE_AND_SPIRITS"||e.type==="OTHER"&&e.id!="EGG")}function l(c){document.getElementById("categories__ul").innerHTML="";let o=document.getElementById("vege-checkbox").checked?b(c):c;document.getElementById("checked")&&(o=o.filter(s=>s.type===checked.className)),f(o)}function k(c){let e=document.getElementById("checked");e?(e.removeAttribute("id"),e!=c&&(c.id="checked")):c.id="checked"}function I(c,e){const o=document.getElementById("types__ul");c.map(s=>{const t=document.createElement("li");t.classList.add(s.id),t.textContent=s.name,t.tabIndex=0,t.addEventListener("click",()=>{k(t),l(e)}),o.append(t)}),document.getElementById("vege-checkbox").addEventListener("click",()=>{l(e)})}const[u,p]=await Promise.all([a(d.products.typesURL),a(d.products.categoriesURL)]),C=u?u.toSorted((c,e)=>c.name.localeCompare(e.name)):{},y=p?p.toSorted((c,e)=>c.name.localeCompare(e.name)):{};I(C,y);f(y);
